<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.helpme.travel.module.admin.AdminMpp">

    <resultMap id="resultMapObj" type="com.helpme.travel.module.admin.Admin"></resultMap>


 <!--  ===========================host================================= -->

	<select id="selectHost" resultMap="resultMapObj">
		select 
			tvmmSeq
		    , tvmmName
		    , tvmmPassword
		    , tvmmDob
		    , tvmmZipCode
		    , tvmmAddress1
		    , tvmmAddress2
		    , tvmmAddressFull
		    , tvmmEmailAccount
		    , tvmmEmailDomain
		    , tvmmEmailDomainCd
		    , tvmmTelecomCd
		    , tvmmTelNumber
		    , tvmmAdminNy
		    , tvmmHostNy
		    , tvmmDesc
		from tvMember
		where 1 = 1
			and tvmmDelNy = 0
		    and tvmmHostNy = 1
	</select>


<!--  ===========================member================================= -->
	
	<select id="selectMember" resultMap="resultMapObj">
		select 
			tvmmSeq
		    , tvmmName
		    , tvmmPassword
		    , tvmmDob
		    , tvmmZipCode
		    , tvmmAddress1
		    , tvmmAddress2
		    , tvmmAddressFull
		    , tvmmEmailAccount
		    , tvmmEmailDomain
		    , tvmmEmailDomainCd
		    , tvmmTelecomCd
		    , tvmmTelNumber
		    , tvmmAdminNy
		    , tvmmHostNy
		    , tvmmDesc
		from tvMember
		where 1 = 1
			and tvmmDelNy = 0
		    and tvmmHostNy = 0
		    and tvmmAdminNy = 0
	</select>
	
	<select id="selectOneMember" resultMap="resultMapObj">
		select 
			tvmmSeq
		    , tvmmName
		    , tvmmPassword
		    , tvmmDob
		    , tvmmZipCode
		    , tvmmAddress1
		    , tvmmAddress2
		    , tvmmAddressFull
		    , tvmmEmailAccount
		    , tvmmEmailDomain
		    , tvmmEmailDomainCd
		    , tvmmTelecomCd
		    , tvmmTelNumber
		    , tvmmAdminNy
		    , tvmmHostNy
		    , tvmmDesc
		from tvMember
		where 1 = 1
			and tvmmDelNy = 0
		    and tvmmSeq = #{tvmmSeq}
	</select>	


	<update id="updateMember">
		update tvMember set
			tvmmName = #{tvmmName}
			, tvmmDob = #{tvmmDob}
			, tvmmZipCode = #{tvmmZipCode}
			, tvmmAddress1 = #{tvmmAddress1}
			, tvmmAddress2 = #{tvmmAddress2}
			, tvmmAddressFull = #{tvmmAddressFull}
			, tvmmEmailAccount = #{tvmmEmailAccount}
			, tvmmEmailDomain = #{tvmmEmailDomain}
			, tvmmEmailDomainCd = #{tvmmEmailDomainCd}
			, tvmmTelecomCd = #{tvmmTelecomCd}
			, tvmmTelNumber = #{tvmmTelNumber}
			, tvmmDesc = #{tvmmDesc}
		where 1=1
			and tvmmSeq = #{tvmmSeq}
	</update>

	

<!--  ===========================lodging================================= -->

	<select id="selectLodging" resultMap="resultMapObj">
		select 
			a.tvamSeq
		    , a.tvamLodgingName
		    , a.tvamHostName
		    , a.tvamDesc
		    , a.tvamZipCode
		    , a.tvamAddress1
		    , a.tvamAddress2
		    , a.tvamAddressFull
		    , a.tvamState
		    , a.tvamCity
		    , a.tvamAdultPrice
		    , a.tvamMaxPersonCount
		    , a.tvamBedCount
		    , a.tvamRoomCount
		    , a.tvamShowerRoomCount
		    , a.tvamApproveNy
		    , a.tvamCategoryCd
		    , a.tvamPoolNy
		    , a.tvamJacuzziNy
		    , a.tvamBbqGrillNy
		    , a.tvamFirePlaceNy
		    , a.tvamGymNy
		    , a.tvamWifiNy
		    , a.tvamTvNy
		    , a.tvamParkingRoomNy
		    , a.tvamAirConditionerNy
		    , a.tvamHeaterNy
		    , a.tvamFridgeNy
		    , a.tvamMicrowaveNy
		    , a.tvamCheckInTime
		    , a.tvamCheckOutTime
		    , a.tvmmSeq
		    , a.tvamTelNumber
		    , (select tvmmEmailAccount from tvMember b where a.tvmmSeq = b.tvmmSeq) as 'host'
		from tvLodging a
		where 1 = 1
			and tvamDelNy = 0

	</select>
	
	<select id="selectOneLodging" resultMap="resultMapObj">
		select 
			a.tvamSeq
		    , a.tvamLodgingName
		    , a.tvamHostName
		    , a.tvamDesc
		    , a.tvamZipCode
		    , a.tvamAddress1
		    , a.tvamAddress2
		    , a.tvamAddressFull
		    , a.tvamState
		    , a.tvamCity
		    , a.tvamAdultPrice
		    , a.tvamMaxPersonCount
		    , a.tvamBedCount
		    , a.tvamRoomCount
		    , a.tvamShowerRoomCount
		    , a.tvamApproveNy
		    , a.tvamCategoryCd
		    , a.tvamPoolNy
		    , a.tvamJacuzziNy
		    , a.tvamBbqGrillNy
		    , a.tvamFirePlaceNy
		    , a.tvamGymNy
		    , a.tvamWifiNy
		    , a.tvamTvNy
		    , a.tvamParkingRoomNy
		    , a.tvamAirConditionerNy
		    , a.tvamHeaterNy
		    , a.tvamFridgeNy
		    , a.tvamMicrowaveNy
		    , a.tvamCheckInTime
		    , a.tvamCheckOutTime
		    , a.tvmmSeq
		    , a.tvamTelNumber
		    , (select tvmmEmailAccount from tvMember b where a.tvmmSeq = b.tvmmSeq) as 'host'
		from tvLodging a
		where 1 = 1
			and tvamDelNy = 0
			and tvamSeq = #{tvamSeq}
	</select>



 <!--  ===========================coupon================================= -->

	<select id="selectCoupon" resultMap="resultMapObj">
		select 
			a.tvcpSeq
		    , a.tvcpName
		    , a.tvcpNumber
		    , a.tvcpPrice
		    , a.tvcpStartDate
		    , a.tvcpEndDate
		    , a.tvcpDesc
		    , a.tvamSeq
		    , b.tvamLodgingName
            , c.tvmmEmailAccount
		from tvCoupon a
	        left join tvLodging b on a.tvamSeq = b.tvamSeq
	        left join tvMember c on b.tvmmSeq = c.tvmmSeq
		where 1 = 1
			and tvcpDelNy = 0
	</select>
	
	<select id="selectOneCoupon" resultMap="resultMapObj">
		select 
			a.tvcpSeq
		    , a.tvcpName
		    , a.tvcpNumber
		    , a.tvcpPrice
		    , a.tvcpStartDate
		    , a.tvcpEndDate
		    , a.tvcpDesc
		    , a.tvamSeq
		    , b.tvamLodgingName
            , c.tvmmEmailAccount
		from tvCoupon a
	        left join tvLodging b on a.tvamSeq = b.tvamSeq
	        left join tvMember c on b.tvmmSeq = c.tvmmSeq
		where 1 = 1
			and tvcpDelNy = 0
			and tvcpSeq = #{tvcpSeq}
	</select>


	
 <!--  ===========================payment================================= -->

	<select id="selectPayment" resultMap="resultMapObj">
		select 
			a.tvpmSeq
		    , a.tvpmAdNumber
		    , a.tvpmStartDate
		    , a.tvpmEndDate
		    , a.tvpmPrice
		    , a.tvcpSeq
		    , b.tvcpPrice
		    , a.tvpmtotalPrice
		    , a.tvpmPayTypeCd
		    , a.tvpmDesc
            , a.tvamSeq
            , c.tvamLodgingName
            , c.tvamTelNumber
            , (select tvmmEmailAccount from tvMember e where e.tvmmSeq = c.tvmmSeq) as 'hostEmail' 
            , a.tvmmSeq
            , d.tvmmName
            , d.tvmmTelNumber
            , d.tvmmEmailAccount
		from tvPayment a
			left join tvCoupon b on a.tvcpSeq = b.tvcpSeq
            left join tvLodging c on a.tvamSeq = c.tvamSeq
            left join tvMember d on a.tvmmSeq = d.tvmmSeq
		where 1 = 1
			and tvpmDelNy = 0
	</select>
	
	<select id="selectOnePayment" resultMap="resultMapObj">
		select 
			a.tvpmSeq
		    , a.tvpmAdNumber
		    , a.tvpmStartDate
		    , a.tvpmEndDate
		    , a.tvpmPrice
		    , a.tvcpSeq
		    , b.tvcpPrice
		    , a.tvpmtotalPrice
		    , a.tvpmPayTypeCd
		    , a.tvpmDesc
            , a.tvamSeq
            , c.tvamLodgingName
            , c.tvamTelNumber
            , (select tvmmEmailAccount from tvMember e where e.tvmmSeq = c.tvmmSeq) as 'hostEmail' 
            , a.tvmmSeq
            , d.tvmmName
            , d.tvmmTelNumber
            , d.tvmmEmailAccount
		from tvPayment a
			left join tvCoupon b on a.tvcpSeq = b.tvcpSeq
            left join tvLodging c on a.tvamSeq = c.tvamSeq
            left join tvMember d on a.tvmmSeq = d.tvmmSeq
		where 1 = 1
			and tvpmDelNy = 0
			and tvpmSeq = #{tvpmSeq}
	</select>
	

	
	
	

	
	
</mapper>